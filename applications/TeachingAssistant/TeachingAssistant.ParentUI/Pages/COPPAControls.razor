@page "/coppa-controls"
@using TeachingAssistant.ParentUI.Services
@inject ApiClient ApiClient

<PageTitle>COPPA Controls</PageTitle>

<h1>COPPA Compliance Controls</h1>

<div class="alert alert-info">
    <h4>Children's Online Privacy Protection Act (COPPA) Compliance</h4>
    <p>As a parent, you have control over your child's data and privacy settings.</p>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5>Data Management</h5>
    </div>
    <div class="card-body">
        <div class="mb-3">
            <h6>Export Student Data</h6>
            <p>Download all data associated with your child's account.</p>
            <button class="btn btn-outline-primary" @onclick="ExportData">Export Data</button>
        </div>
        
        <div class="mb-3">
            <h6>Delete Student Account</h6>
            <p>Permanently delete your child's account and all associated data.</p>
            <button class="btn btn-danger" @onclick="RequestDeletion">Request Account Deletion</button>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5>Privacy Settings</h5>
    </div>
    <div class="card-body">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="dataCollection" @bind="allowDataCollection">
            <label class="form-check-label" for="dataCollection">
                Allow data collection for personalized learning
            </label>
        </div>
        <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="aiInteractions" @bind="allowAIInteractions">
            <label class="form-check-label" for="aiInteractions">
                Allow AI tutoring interactions
            </label>
        </div>
        <button class="btn btn-primary mt-3" @onclick="SaveSettings">Save Settings</button>
    </div>
</div>

@code {
    private bool allowDataCollection = true;
    private bool allowAIInteractions = true;

    private async Task ExportData()
    {
        // TODO: Implement data export via API
        // This would call GDPR compliance service
    }

    private async Task RequestDeletion()
    {
        // TODO: Implement account deletion request
        // This would call GDPR compliance service for COPPA-compliant deletion
    }

    private async Task SaveSettings()
    {
        // TODO: Save privacy settings via API
    }
}
